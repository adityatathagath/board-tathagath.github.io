JavaScript
const listContainer = document.querySelector('.collapse-list ul');
const selectedIdInput = document.getElementById('selected-id');

function createListItem(macro) {
  const listItem = document.createElement('li');
  listItem.classList.add('list-item');

  const toggle = document.createElement('span');
  toggle.classList.add('list-item-toggle', 'cursor-pointer', 'transition', 'duration-200', 'ease-in-out');
  toggle.textContent = '>';
  toggle.addEventListener('click', () => toggleListItem(listItem));
  listItem.appendChild(toggle);

  const content = document.createElement('span');
  content.classList.add('list-item-content', 'cursor-pointer', 'hover:text-gray-600');
  content.textContent = macro.name;
  content.addEventListener('click', () => updateSelectedId(macro.id));
  listItem.appendChild(content);

  const listBody = document.createElement('div');
  listBody.classList.add('list-body', 'hidden');
  // Filter child data from yourJsonData based on current macro ID
  const childMacros = yourJsonData.filter(child => child.id.toString().startsWith(macro.id.toString()) && child.level === macro.level + 1);
  for (const childMacro of childMacros) {
    listBody.appendChild(createListItem(childMacro));
  }
  listItem.appendChild(listBody);

  return listItem;
}

function toggleListItem(listItem) {
  const listBody = listItem.querySelector('.list-body');
  listBody.classList.toggle('hidden');
  toggle.textContent = listBody.classList.contains('hidden') ? '>' : '^';
}

function updateSelectedId(id) {
  selectedIdInput.value = id;
}

// Function to process your JSON data and build the list
function buildList(data) {
  for (const macro of data) {
    listContainer.appendChild(createListItem(macro));
  }
}

// Replace with your actual JSON data
const yourJsonData = [
  { "name": "Macro", "id": 41253, "level": 3 },
  { "name": "Macrosc", "id": 4125032, "level": 4 },
  { "name": "Macrocsncs", "id": 4125032, "level": 4 },
  { "name": "CMMacro", "id": 41250123, "level": 5 },
  { "name": "Macrozxc", "id": 412504678, "level": 3 },
  { "name": "Macroasd", "id": 41250, "level": 4 },
  { "name": "Macroazxcd", "id": 41250, "level": 4 },
  { "name": "Macronddnnd", "id": 4125037474, "level": 3 },
  { "name": "Macrohdhd", "id": 4125037474, "level": 4 },
  { "name": "cog Macro", "id": 4125012345, "level": 5 }
];

buildList(yourJsonData);